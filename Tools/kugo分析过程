âœ…
  7639 ms  -[KGTencentStatistics forceRereshDeviceIDMachineName:0x2802b9b40 o36:0x2802b9b40]
  7639 ms  ğŸ‘‰1482ec024f1effab71edd705000016319904ï¼ˆ__NSCFStringï¼‰
  7639 ms  ğŸ‘‰1482ec024f1effab71edd705000016319904ï¼ˆ__NSCFStringï¼‰
  7639 ms  stack: 0x10bc607e8 kugou!-[KGTencentStatistics update:o36:]
0x102f0c820 kugou!-[OstarService updateO16:o36:]
0x102ee5ac4 kugou!-[Qmeiegtm qmei_evkj6p0:]
0x102ee7aac kugou!-[Qmeiegtm qmei_qrlegk:serverCode:]
0x102ee7518 kugou!-[Qmeiegtm qmei_e948ze8:code:]
0x102f01af4 kugou!0xb9af4 (0x1000b9af4)
0x10fa85570 kugou!0xcc3d570 (0x10cc3d570)
0x102ecaa2c kugou!0x82a2c (0x100082a2c)
0x102eca2a0 kugou!0x822a0 (0x1000822a0)
0x10bc6076c kugou!0x8e1876c (0x108e1876c)
0x190f8b7a8 libdispatch.dylib!_dispatch_call_block_and_release
0x190f8c780 libdispatch.dylib!_dispatch_client_callout
0x190f6de10 libdispatch.dylib!_dispatch_main_queue_drain
0x190f6da88 libdispatch.dylib!_dispatch_main_queue_callback_4CF$VARIANT$armv81
0x18a26d9ac CoreFoundation!__CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__
0x18a251648 CoreFoundation!__CFRunLoopRun
  9225 ms  ğŸ‘ˆ: 1482ec024f1effab71edd705000016319904ï¼ˆ__NSCFStringï¼‰


  8726 ms  -[OstarService updateO16:0x283727080 o36:0x283727080]
  8726 ms  stack: 0x100511ac4 kugou!-[Qmeiegtm qmei_evkj6p0:]
0x100513aac kugou!-[Qmeiegtm qmei_qrlegk:serverCode:]
0x100513518 kugou!-[Qmeiegtm qmei_e948ze8:code:]
0x10052daf4 kugou!0xb9af4 (0x1000b9af4)
0x10d0b1570 kugou!0xcc3d570 (0x10cc3d570)
0x1004f6a2c kugou!0x82a2c (0x100082a2c)
0x1004f62a0 kugou!0x822a0 (0x1000822a0)
0x10928c76c kugou!0x8e1876c (0x108e1876c)
0x190f8b7a8 libdispatch.dylib!_dispatch_call_block_and_release
0x190f8c780 libdispatch.dylib!_dispatch_client_callout
0x190f6de10 libdispatch.dylib!_dispatch_main_queue_drain
0x190f6da88 libdispatch.dylib!_dispatch_main_queue_callback_4CF$VARIANT$armv81
0x18a26d9ac CoreFoundation!__CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__
0x18a251648 CoreFoundation!__CFRunLoopRun
0x18a255d20 CoreFoundation!CFRunLoopRunSpecific
0x1c2325998 GraphicsServices!GSEventRunModal
 10227 ms  ğŸ‘ˆ: 1482ec024f1effab71edd705000016319904ï¼ˆ__NSCFStringï¼‰



-[QimeiContent setQimeiOld:0x2801fc440]
è°ƒç”¨æ ˆ:
0x104350270 kugou!-[OstarService startWithO16:o36:delegate:]
0x1042dc33c kugou!-[KGTencentStatistics setUpOStar]
0x1042dbfd8 kugou!-[KGTencentStatistics setUpTencentStatics]
0x1042da39c kugou!0x4e39c (0x10004e39c)
0x190f8c780 libdispatch.dylib!_dispatch_client_callout
0x190f5cddc libdispatch.dylib!_dispatch_once_callout
0x1042da324 kugou!+[KGAutoTrackTask setupStatics]
0x10cd7cb34 kugou!-[KGStartUpTaskManager pTaskObjectperform:queueKey:]
0x10cd7b974 kugou!0x8aef974 (0x108aef974)
0x10cd7a30c kugou!-[KGStartUpTaskSysQueue runTasks:]
0x10cd7c84c kugou!-[KGStartUpTaskManager pRunQueueWithTasks:queueKey:]
0x10cd7aff0 kugou!-[KGStartUpTaskManager pRunWithQueueKey:]
0x1045c250c kugou!0x33650c (0x10033650c)
0x10bbbc74c kugou!-[KGPrivacyPolicySheetViewManager showPrivacyPolicyLaunchFromBasicMode:withOkBlock:]
0x1045c2454 kugou!0x336454 (0x100336454)
0x1045c0ee0 kugou!-[SceneDelegate scene:willConnectToSession:options:]


0x1001b7fd8 kugou!-[KGTencentStatistics setUpTencentStatics]
0x1001b639c kugou!0x4e39c (0x10004e39c)
0x190f8c780 libdispatch.dylib!_dispatch_client_callout
0x190f5cddc libdispatch.dylib!_dispatch_once_callout
0x1001b6324 kugou!+[KGAutoTrackTask setupStatics]
0x108c58b34 kugou!-[KGStartUpTaskManager pTaskObjectperform:queueKey:]
0x108c57974 kugou!0x8aef974 (0x108aef974)
0x108c5630c kugou!-[KGStartUpTaskSysQueue runTasks:]
0x108c5884c kugou!-[KGStartUpTaskManager pRunQueueWithTasks:queueKey:]
0x108c56ff0 kugou!-[KGStartUpTaskManager pRunWithQueueKey:]
0x10049e50c kugou!0x33650c (0x10033650c)
0x107a9874c kugou!-[KGPrivacyPolicySheetViewManager showPrivacyPolicyLaunchFromBasicMode:withOkBlock:]
0x10049e454 kugou!0x336454 (0x100336454)
0x10049cee0 kugou!-[SceneDelegate scene:willConnectToSession:options:]




âœ…-[Qmeiegtm qmei_evkj6p0:]
- (void)qmei_evkj6p0:(id)arg {
    // å¯¹åº”æ±‡ç¼–: X0=X2 -> BL __HippyI18nUtils_copy__0
    id copied = [HippyI18nUtils copyString:arg]; // å ä½ï¼šå¯¹åº” __HippyI18nUtils_copy__0

    // å¯¹åº”æ±‡ç¼–: [OstarService shareInstance]
    OstarService *svc = [OstarService shareInstance];

    // å¯¹åº”æ±‡ç¼–: [copied qimeiOld]
    id qimeiOld = [copied qimeiOld];

    // å¯¹åº”æ±‡ç¼–: [copied qimeiNew]
    id qimeiNew = [copied qimeiNew];

    // å¯¹åº”æ±‡ç¼–: [svc updateO16:o36:]
    [svc updateO16:qimeiOld o36:qimeiNew];

    // ARC è‡ªåŠ¨ç®¡ç† copied / qimeiOld / qimeiNew / svc çš„å†…å­˜
}

âœ…-[Qmeiegtm qmei_qrlegk:serverCode:]
- (void)qmei_qrlegk:(id)json serverCode:(id)serverCode{
    id copied = [HippyI18nUtils copyString:json];

    if ([copied length] == 0) {
        [self qmei_rr8qkll:nil];
        [self qmei_x6ujqb:serverCode];
        return;
    }

    // æ„é€  QimeiContent å¯¹è±¡
    QimeiContent *content = [[QimeiContent alloc] initWithQimeiJson:copied];

    id newQimei = [self qmei_tc50i0:json newQimei:content];
    [self qmei_ub5aadp7:content];

    [self qmei_evkj6p0:newQimei];

    id qimeiContent = [self qmeiContent];
    [self qmei_rr8qkll:qimeiContent];
}

âœ…-[Qmeiegtm qmei_e948ze8:code:]
- (void)qmei_e948ze8:(id)param1 code:(id)param2 {

    NSMutableDictionary *dict = [@{} mutableCopy];

    // key1 = @"q16"
    NSString *key1 = @"q16";
    NSString *value1;

    if (something < 0) {
        value1 = [NSString stringWithUTF8String:ptrFromVar70];
    } else {
        value1 = [NSString stringWithUTF8String:ptrFromVar78];
    }

    dict[key1] = value1;

    // key2 = @"q36"
    NSString *key2 = @"q36";
    NSString *value2;

    if (something2 < 0) {
        value2 = [NSString stringWithUTF8String:ptrFromVar50];
    } else {
        value2 = [NSString stringWithUTF8String:ptrFromVar78 + 0x20];
    }

    dict[key2] = value2;

    // å¦‚æœä»»ä¸€å­—æ®µæœ‰æ•ˆ â†’ åºåˆ—åŒ– JSON å¹¶å‘é€ç»™ qmei_qrlegk
    if (value1 != nil || value2 != nil) {
        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict options:0 error:nil];
        NSString *jsonStr = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
        [self qmei_qrlegk:jsonStr serverCode:0];
    }

    NSString *result = [self qmei_wqtq9f];
    NSLog(@"REGISTER success code: %ld, %@", (long)1, result);
}

âœ…-[Qmeiegtm qmei_qrlegk:serverCode:]
- (void)qmei_qrlegk:(HippyI18nUtils *)arg1 serverCode:(id)arg2 {
    // å¤åˆ¶è¾“å…¥çš„ HippyI18nUtils å¯¹è±¡
    HippyI18nUtils *copiedArg1 = [arg1 copy];
    
    // æ£€æŸ¥å¤åˆ¶åçš„å¯¹è±¡æ˜¯å¦æœ‰æ•ˆï¼ˆlength > 0ï¼‰
    if (copiedArg1.length > 0) {
        // åˆ›å»º QimeiContent å®ä¾‹
        QimeiContent *qimeiContent = [[QimeiContent alloc] initWithQimeiJson:copiedArg1];
        
        // è°ƒç”¨å¤šä¸ªå†…éƒ¨æ–¹æ³•
        [self qmei_tc50i0:arg1 newQimei:qimeiContent];
        
        id result = [self qmei_ub5aadp7:qimeiContent];
        [self qmei_evkj6p0:result];
        
        QimeiContent *existingContent = self.qmeiContent;
        [self qmei_rr8qkll:existingContent];
    } else {
        // å¦‚æœå¤åˆ¶åçš„å¯¹è±¡æ— æ•ˆï¼Œè°ƒç”¨ä¸åŒçš„æ–¹æ³•
        [self qmei_rr8qkll:nil];
        [self qmei_x6ujqb:arg2];
    }
}

âœ…-[Qmeiegtm qmei_tc50i0:newQimei:]
- (void)qmei_tc50i0:(HippyI18nUtils *)oldQimei newQimei:(HippyI18nUtils *)newQimei {
    // å¤åˆ¶è¾“å…¥çš„ä¸¤ä¸ª HippyI18nUtils å¯¹è±¡
    HippyI18nUtils *copiedOld = [oldQimei copy];
    HippyI18nUtils *copiedNew = [newQimei copy];
    
    BOOL shouldCallMethod = NO;
    
    // æ£€æŸ¥ oldQimei çš„ qimeiOld å±æ€§
    NSString *oldQimeiOldValue = [copiedOld qimeiOld];
    if (oldQimeiOldValue.length > 0) {
        NSString *copiedOldQimeiOld = [copiedOld qimeiOld];
        NSString *copiedNewQimeiOld = [copiedNew qimeiOld];
        // å¦‚æœä¸¤ä¸ª qimeiOld å€¼ä¸ç›¸ç­‰ï¼Œè®¾ç½®æ ‡è®°ä¸º YES
        if (![copiedOldQimeiOld isEqualToString:copiedNewQimeiOld]) {
            shouldCallMethod = YES;
        }
    }
    
    // æ£€æŸ¥ oldQimei çš„ qimeiNew å±æ€§
    NSString *oldQimeiNewValue = [copiedOld qmeiNew];
    if (oldQimeiNewValue.length > 0) {
        NSString *copiedOldQimeiNew = [copiedOld qmeiNew];
        NSString *copiedNewQimeiNew = [newQimei qmeiNew];
        // å¦‚æœä¸¤ä¸ª qimeiNew å€¼ä¸ç›¸ç­‰ï¼Œè®¾ç½®æ ‡è®°ä¸º YES
        if (![copiedOldQimeiNew isEqualToString:copiedNewQimeiNew]) {
            shouldCallMethod = YES;
        }
    }
    
    // å¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªå±æ€§ä¸ç›¸ç­‰ï¼Œè°ƒç”¨ qmei_fgcupvyp:oldQ36:newQ16:newQ36: æ–¹æ³•
    if (shouldCallMethod) {
        NSString *arg1 = [copiedOld qimeiOld];
        NSString *arg2 = [copiedOld qmeiNew];
        NSString *arg3 = [copiedNew qimeiOld];
        NSString *arg4 = [newQimei qmeiNew];
        
        [self qmei_fgcupvyp:arg1 oldQ36:arg2 newQ16:arg3 newQ36:arg4];
    }
}


  8015 ms  -[Qmeiegtm qmei_tc50i0:0x0 newQimei:0x281949c60]
  8015 ms  ğŸ‘‰nilï¼ˆnilï¼‰
  8015 ms  ğŸ‘‰<QimeiContent: 0x281949c60>ï¼ˆQimeiContentï¼‰
  8015 ms  stack: 0x1049d7a78 kugou!-[Qmeiegtm qmei_qrlegk:serverCode:]
0x1049d7518 kugou!-[Qmeiegtm qmei_e948ze8:code:]
0x1049f1af4 kugou!0xb9af4 (0x1000b9af4)
0x111575570 kugou!0xcc3d570 (0x10cc3d570)
0x1049baa2c kugou!0x82a2c (0x100082a2c)
0x1049ba2a0 kugou!0x822a0 (0x1000822a0)
0x10d75076c kugou!0x8e1876c (0x108e1876c)
0x190f8b7a8 libdispatch.dylib!_dispatch_call_block_and_release
0x190f8c780 libdispatch.dylib!_dispatch_client_callout
0x190f6de10 libdispatch.dylib!_dispatch_main_queue_drain
0x190f6da88 libdispatch.dylib!_dispatch_main_queue_callback_4CF$VARIANT$armv81
0x18a26d9ac CoreFoundation!__CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__
0x18a251648 CoreFoundation!__CFRunLoopRun
0x18a255d20 CoreFoundation!CFRunLoopRunSpecific
0x1c2325998 GraphicsServices!GSEventRunModal
0x18c4e834c UIKitCore!-[UIApplication _run]
  9472 ms  ğŸ‘ˆ: nil nil



âœ…-[Qmeiegtm qmei_e948ze8:code:]
- (void)qmei_e948ze8:(id)arg1 code:(id)arg2 {
    // åˆå§‹åŒ–ä¸€äº›ä¸´æ—¶å˜é‡å’Œç¼“å†²åŒº
    char buffer[0x70]; // 112å­—èŠ‚çš„ç¼“å†²åŒº
    memset(buffer, 0, sizeof(buffer));
    
    // è°ƒç”¨ä¸€ä¸ªå†…éƒ¨å‡½æ•°å¤„ç†ç¼“å†²åŒºï¼ˆå…·ä½“é€»è¾‘æœªçŸ¥ï¼‰
    [self qmei_e948ze8:code:];
    sub_10009F688(buffer);
    
    // åˆ›å»ºä¸€ä¸ªå¯å˜å­—å…¸
    NSMutableDictionary *dict = [NSDictionary dictionary].mutableCopy;
    
    // å¤„ç† "q16" ç›¸å…³é€»è¾‘
    NSString *q16Key = @"q16";
    const char *q16ValuePtr = buffer;
    if (buffer[7] < 0) {
        q16ValuePtr = buffer + 8;
    }
    NSString *q16Value = [NSString stringWithUTF8String:q16ValuePtr];
    [self addKeyValueToDictionary:dict key:q16Key value:q16Value];
    
    // å¤„ç† "q36" ç›¸å…³é€»è¾‘
    NSString *q36Key = @"q36";
    const char *q36ValuePtr = buffer + 0x20;
    if (buffer[0x5F] < 0) {
        q36ValuePtr = *(const char **)(buffer + 0x50);
    }
    NSString *q36Value = [NSString stringWithUTF8String:q36ValuePtr];
    [self addKeyValueToDictionary:dict key:q36Key value:q36Value];
    
    // æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆæ•°æ®å¹¶å¤„ç†
    BOOL hasValidData = NO;
    if (buffer[7] >= 0 || *(void **)(buffer + 0x70) != NULL) {
        hasValidData = YES;
    } else if (buffer[0x5F] >= 0 || *(void **)(buffer + 0x50) != NULL) {
        hasValidData = YES;
    }
    
    if (hasValidData) {
        // å°†å­—å…¸è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²
        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict options:0 error:nil];
        NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
        
        // è°ƒç”¨ç›¸å…³æ–¹æ³•
        [self qmei_qrlegk:jsonString serverCode:nil];
        
        [jsonString release];
        [jsonData release];
    } else {
        // å¦‚æœæ²¡æœ‰æœ‰æ•ˆæ•°æ®ï¼Œè°ƒç”¨ä¸åŒçš„æ–¹æ³•
        [self qmei_qrlegk:nil serverCode:arg2];
    }
    
    // åç»­å¤„ç†å’Œæ—¥å¿—è®°å½•
    id result = [self qmei_wqtq9f];
    NSString *logFormat = @"REGISTER success code: %ld, %@";
    sub_107C0A6BC(1, (long long)result, logFormat);
    
    [logFormat release];
    [result release];
    [dict release];
}

// è¾…åŠ©æ–¹æ³•ï¼šå‘å­—å…¸ä¸­æ·»åŠ é”®å€¼å¯¹ï¼ˆæ ¹æ®æ±‡ç¼–ä¸­çš„ sub_107C0A6B8 æ¨æ–­ï¼‰
- (void)addKeyValueToDictionary:(NSMutableDictionary *)dict key:(NSString *)key value:(NSString *)value {
    if (dict && key && value) {
        dict[key] = value;
    }
}


âœ…sub_10009F688
_text:000000010009F688 ; =============== S U B R O U T I N E =======================================
__text:000000010009F688
__text:000000010009F688 ; Attributes: bp-based frame
__text:000000010009F688
__text:000000010009F688 sub_10009F688                ; CODE XREF: -[Qmeiegtm qmei_e948ze8:code:]+4Câ†‘p
__text:000000010009F688                              ; DATA XREF: __const:000000010F672778â†“o
__text:000000010009F688
__text:000000010009F688 var_50          = -0x50
__text:000000010009F688 var_4C          = -0x4C
__text:000000010009F688 var_48          = -0x48
__text:000000010009F688 var_44          = -0x44
__text:000000010009F688 __p             = -0x40
__text:000000010009F688 var_29          = -0x29
__text:000000010009F688 var_28          = -0x28
__text:000000010009F688 var_20          = -0x20
__text:000000010009F688 var_18          = -0x18
__text:000000010009F688 var_10          = -0x10
__text:000000010009F688 var_8           = -8
__text:000000010009F688 var_s0          =  0
__text:000000010009F688 var_s8          =  8
__text:000000010009F688
__text:000000010009F688                 SUB             SP, SP, #0x60
__text:000000010009F68C                 STP             X22, X21, [SP,#0x50+var_20]
__text:000000010009F690                 STP             X20, X19, [SP,#0x50+var_10]
__text:000000010009F694                 STP             X29, X30, [SP,#0x50+var_s0]
__text:000000010009F698                 ADD             X29, SP, #0x50
__text:000000010009F69C                 MOV             X20, X0
__text:000000010009F6A0                 LDRB            W8, [X1,#0x17]
__text:000000010009F6A4                 SXTB            W9, W8
__text:000000010009F6A8                 LDR             X10, [X1,#8]
__text:000000010009F6AC                 CMP             W9, #0
__text:000000010009F6B0                 CSEL            X8, X10, X8, LT
__text:000000010009F6B4                 STP             WZR, W8, [SP,#0x50+var_48]
__text:000000010009F6B8                 ADD             X8, SP, #0x50+var_48
__text:000000010009F6BC                 ADD             X0, X8, #8 ; this
__text:000000010009F6C0                 BL              j___ZNSt3__112basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEC1ERKS5_ ; std::string::basic_string(std::string const&)
__text:000000010009F6C4                 LDP             W8, W9, [SP,#0x50+var_48]
__text:000000010009F6C8                 CMP             W8, W9
__text:000000010009F6CC                 B.CS            loc_10009F768
__text:000000010009F6D0                 ADD             X19, X20, #0x20 ; ' '
__text:000000010009F6D4                 ADD             X20, X20, #8
__text:000000010009F6D8                 MOV             W22, #0xF
__text:000000010009F6DC
__text:000000010009F6DC loc_10009F6DC                           ; CODE XREF: sub_10009F688+DCâ†“j
__text:000000010009F6DC                 STR             XZR, [SP,#0x50+var_28]
__text:000000010009F6E0                 ADD             X0, SP, #0x50+var_48
__text:000000010009F6E4                 ADD             X1, SP, #0x50+var_28
__text:000000010009F6E8                 BL              sub_10007B5A0
__text:000000010009F6EC                 CMP             W0, #0x100
__text:000000010009F6F0                 B.NE            loc_10009F770
__text:000000010009F6F4                 LDR             X8, [SP,#0x50+var_28]
__text:000000010009F6F8                 AND             X9, X8, #7
__text:000000010009F6FC                 CMP             X9, #6
__text:000000010009F700                 CSEL            W9, W9, W22, CC
__text:000000010009F704                 LSR             X8, X8, #3
__text:000000010009F708                 STP             W9, W8, [SP,#0x50+var_50]
__text:000000010009F70C                 CMP             W8, #2
__text:000000010009F710                 B.GE            loc_10009F734
__text:000000010009F714                 CMP             W8, #1
__text:000000010009F718                 B.NE            loc_10009F750
__text:000000010009F71C                 ADD             X0, SP, #0x50+var_48
__text:000000010009F720                 MOV             X1, X20
__text:000000010009F724                 BL              sub_10007B45C
__text:000000010009F728                 CMP             W0, #0x100
__text:000000010009F72C                 B.EQ            loc_10009F75C
__text:000000010009F730                 B               loc_10009F79C
__text:000000010009F734 ; ---------------------------------------------------------------------------
__text:000000010009F734
__text:000000010009F734 loc_10009F734                           ; CODE XREF: sub_10009F688+88â†‘j
__text:000000010009F734                 B.NE            loc_10009F750
__text:000000010009F738                 ADD             X0, SP, #0x50+var_48
__text:000000010009F73C                 MOV             X1, X19
__text:000000010009F740                 BL              sub_10007B45C
__text:000000010009F744                 CMP             W0, #0x100
__text:000000010009F748                 B.EQ            loc_10009F75C
__text:000000010009F74C                 B               loc_10009F7A4
__text:000000010009F750 ; ---------------------------------------------------------------------------
__text:000000010009F750
__text:000000010009F750 loc_10009F750                           ; CODE XREF: sub_10009F688+90â†‘j
__text:000000010009F750                                         ; sub_10009F688:loc_10009F734â†‘j
__text:000000010009F750                 ADD             X0, SP, #0x50+var_48
__text:000000010009F754                 MOV             X1, SP
__text:000000010009F758                 BL              sub_10007B4EC
__text:000000010009F75C
__text:000000010009F75C loc_10009F75C                           ; CODE XREF: sub_10009F688+A4â†‘j
__text:000000010009F75C                                         ; sub_10009F688+C0â†‘j
__text:000000010009F75C                 LDP             W8, W9, [SP,#0x50+var_48]
__text:000000010009F760                 CMP             W8, W9
__text:000000010009F764                 B.CC            loc_10009F6DC
__text:000000010009F768
__text:000000010009F768 loc_10009F768                           ; CODE XREF: sub_10009F688+44â†‘j
__text:000000010009F768                 MOV             W21, #0x100
__text:000000010009F76C                 B               loc_10009F774
__text:000000010009F770 ; ---------------------------------------------------------------------------
__text:000000010009F770
__text:000000010009F770 loc_10009F770                           ; CODE XREF: sub_10009F688+68â†‘j
__text:000000010009F770                 MOV             X21, X0
__text:000000010009F774
__text:000000010009F774 loc_10009F774                           ; CODE XREF: sub_10009F688+E4â†‘j
__text:000000010009F774                                         ; sub_10009F688+118â†“j ...
__text:000000010009F774                 LDRSB           W8, [SP,#0x50+var_29]
__text:000000010009F778                 TBZ             W8, #0x1F, loc_10009F784
__text:000000010009F77C                 LDR             X0, [SP,#0x50+__p] ; __p
__text:000000010009F780                 BL              j___ZdlPv ; operator delete(void *)
__text:000000010009F784
__text:000000010009F784 loc_10009F784                           ; CODE XREF: sub_10009F688+F0â†‘j
__text:000000010009F784                 MOV             X0, X21
__text:000000010009F788                 LDP             X29, X30, [SP,#0x50+var_s0]
__text:000000010009F78C                 LDP             X20, X19, [SP,#0x50+var_10]
__text:000000010009F790                 LDP             X22, X21, [SP,#0x50+var_20]
__text:000000010009F794                 ADD             SP, SP, #0x60 ; '`'
__text:000000010009F798                 RET
__text:000000010009F79C ; ---------------------------------------------------------------------------
__text:000000010009F79C
__text:000000010009F79C loc_10009F79C                           ; CODE XREF: sub_10009F688+A8â†‘j
__text:000000010009F79C                 MOV             W21, #0x203
__text:000000010009F7A0                 B               loc_10009F774
__text:000000010009F7A4 ; ---------------------------------------------------------------------------
__text:000000010009F7A4
__text:000000010009F7A4 loc_10009F7A4                           ; CODE XREF: sub_10009F688+C4â†‘j
__text:000000010009F7A4                 MOV             W21, #0x204
__text:000000010009F7A8                 B               loc_10009F774
__text:000000010009F7A8 ; End of function sub_10009F688



âœ…-[Qmeiegtm qmei_qrlegk:serverCode:]
// ObjC æ–¹æ³•ç­¾åï¼ˆä»åæ±‡ç¼–å¾—åˆ°ï¼‰
- (void)qmei_qrlegk:(id)payload serverCode:(signed long long)serverCode {
    // X2 å­˜çš„æ˜¯ payloadï¼ˆidï¼‰
    id copied = [HippyI18nUtils copy: payload];        // X19 = copied
    // è°ƒç”¨ [copied length]
    if ([copied length] == 0) {
        // payload ä¸ºç©º/é•¿åº¦ 0 çš„åˆ†æ”¯
        [self qmei_rr8qkll: 0];                        // e.g. æ¸…ç©º/å›è°ƒå¤±è´¥
        [self qmei_x6ujqb: copied];                    // ä¼ å›åŸå§‹ copied? (æ±‡ç¼–ä¸­ X2=X21)
    } else {
        // æ„é€  QimeiContent *content = [[QimeiContent alloc] initWithQimeiJson:copied];
        QimeiContent *content = [[QimeiContent alloc] initWithQimeiJson: copied];
        // è°ƒç”¨ [self qmei_tc50i0_newQimei: content]  ï¼ˆæ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°å¯èƒ½æ˜¯ self çš„æŸä¸ªå­—æ®µ X20->0x18 ä½œä¸ºç¬¬2å‚æ•°ï¼‰
        [self qmei_tc50i0_newQimei: (idAtOffset18) newQimei: content];
        // å†è°ƒç”¨ [self qmei_ub5aadp7: content]
        [self qmei_ub5aadp7: content];
        // æŒæœ‰ä¸€ä¸ª autoreleased return valueï¼Œç„¶åå†è°ƒç”¨ qmei_evkj6p0:ï¼ˆå¯èƒ½æ˜¯å¦ä¸€è·¯ä¸ŠæŠ¥/å›è°ƒï¼Œå‚æ•°ä¸ºä¸Šä¸€æ­¥è¿”å›ï¼‰
        id tmp = objc_retainAutoreleasedReturnValue(); // X22
        [self qmei_evkj6p0: tmp];
        [tmp release];
        // è°ƒç”¨ self.qimeiContent (å±æ€§è®¿é—®?) -> å¾—åˆ°æŸ objï¼Œç„¶åè°ƒç”¨ qmei_rr8qkll: with that obj
        id tmp2 = [[self qimeiContent] autorelease? keep];
        [self qmei_rr8qkll: tmp2];
        [tmp2 release];
        [content release];
    }
    // æœ€åè¿”å› copied (X19) å¹¶é‡Šæ”¾æ ˆ/å¯„å­˜å™¨
    return copied;
}



























//å¼ºåˆ¶é‡æ–°åˆ·æ–°è®¾å¤‡ç›¸å…³ ID
âœ…-[KGTencentStatistics forceRereshDeviceIDMachineName:o36:]
- (void)forceRereshDeviceIDMachineName:(id)o16 o36:(id)o36 {
    // X2 -> o16
    id obj16 = o16;
    // X3 -> o36
    id obj36 = o36;

    // å»ºä¸€ä¸ªå­—å…¸
    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithCapacity:1];

    // ä¿å­˜å­—æ®µ "o16" : obj16
    [dict setObjectKGSafe:obj16 forKey:@"o16"];

    // ä¿å­˜å­—æ®µ "o36" : obj36
    [dict setObjectKGSafe:obj36 forKey:@"o36"];

    // æŠŠ o36 è®¾ç½®åˆ°å¯¹è±¡å±æ€§é‡Œï¼ˆå†…å­˜ä¸­ç¼“å­˜ï¼‰
    [self setTcQ36:obj36];

    // è½¬æˆ JSON å­—ç¬¦ä¸²
    NSString *json = [dict JSONString2];

    // è‹¥ JSON ä¸ä¸ºç©º
    if (json && json.length > 0) {

        // å­˜å…¥ NSUserDefaults ï¼ˆâ€œæœåŠ¡å™¨ç”Ÿæˆè®¾å¤‡å¤§IDâ€ï¼‰
        [self setTencentAutoTrackSeverGenUdidBigNumber:json];

        // å†å†™å…¥ Keychainï¼ˆæŒä¹…åŒ–ï¼‰
        [UICKeyChainStore setString:json forKey:@"kTencentStatic_Qimei"];
    }
}





âœ…
- [OstarService isValidOstar16:ostar36:]
- (BOOL)isValidOstar16:(NSString *)o16 ostar36:(NSString *)o36 {
    // 1. copy å‚æ•°
    NSString *o16Copy = [HippyI18nUtils copy:o16];
    NSString *o36Copy = [HippyI18nUtils copy:o36];

    // 2. å­—ç¬¦ä¸²é•¿åº¦æ ¡éªŒ
    if (o16Copy.length == 0 && o36Copy.length == 0) {
        return NO;
    }

    // 3. å¦‚æœ o36.length != 0ï¼Œå¹¶ä¸” o36.length != 36ï¼ˆ0x24ï¼‰
    if (o36Copy.length != 0 && o36Copy.length != 36) {
        return NO;
    }

    // 4. X21[8] æ ‡è¯†ä½ï¼ˆç”¨ä½œ flagï¼‰
    if (X21->flag == 0) {
        X21->flag = 1;

        // 5. åˆ›å»º QimeiContent å¯¹è±¡
        QimeiContent *content = [[QimeiContent alloc] init];
        content.qimeiOld = o16Copy;
        content.qimeiNew = o36Copy;

        // 6. è®¾ç½® content åˆ° self
        self.content = content;

        // 7. è°ƒç”¨ isCloneAppWithAppkey åˆ¤æ–­æ˜¯å¦å…‹éš† App
        NSString *appkey = [self appkey];
        BOOL isClone = [Qmeixfln isCloneAppWithAppkey:appkey];
        if (isClone) {
            return NO;
        }
    }

    // 8. æ ¡éªŒ token æ—¶é—´å·®ï¼Œåˆ¤æ–­æ˜¯å¦è¿‡æœŸ
    NSDate *now = [NSDate date];
    NSTimeInterval nowSec = [now timeIntervalSince1970];
    NSTimeInterval tokenTime = [self getTokenTime];

    if (nowSec - tokenTime <= THRESHOLD) {
        return YES;
    }

    return NO;
}


âœ…
-[KGTencentStatistics setUpOStar]
- (void)setUpOStar {
    OstarService *ostar = [OstarService shareInstance];

    // 1. appVersion
    NSString *appVersion = [StatisticInfo appVersion];
    [ostar setAppVersion:appVersion];

    // 2. channelFlag (æ¸ é“)
    NSString *channel = [StatisticInfo channelFlag];
    [ostar setChannelId:channel];

    // 3. udid -> KG_IMEI:f0ba4274f07ab91d5237b5996853acae1ea8e18b
    NSString *udid = [StatisticInfo udid];
    [ostar setUserId:udid forType:@"KG_IMEI"];

    // 4. userId -> KG_USERID
    NSString *userId = [[UserOpBLL shareUserInfo] userID];
    [ostar setUserId:userId forType:@"KG_USERID"];

    // 5. H_DEVICE_ID
    KGSeverShareDeviceIDGen *gen = [TrackerLiteContext setBaseContext];
    NSString *h_device_id = [gen getLocalServerSharedDeviceIDString];
    [ostar setUserId:h_device_id forType:@"KG_H_DEVICE_ID"];

    // 6. AppKeyï¼ˆéå¸¸å…³é”®ï¼Œåå…‹éš†æ£€æµ‹ä½¿ç”¨ï¼‰
    [ostar setAppkey:@"0IOS0L946E4OIXHV"];

    // 7. deviceIDMachineName -> JSON -> NSDictionary
    NSString *jsonStr = [self deviceIDMachineName];
    NSDictionary *dict = [NSDictionary dictionaryWithJSONString:jsonStr error:nil];

    // 8. è·å– o16 / o36
    NSString *o16 = [dict stringForKeyKGSafe:@"o16"];
    NSString *o36 = [dict stringForKeyKGSafe:@"o36"];

    // å¦‚æœ o36 ä¸ºç©ºï¼Œç”¨é»˜è®¤ï¼ˆä»å…¨å±€ç»“æ„å–çš„ï¼‰
    if ([StringTool isEmptyStr:o36]) {
        o36 = stru_10F8E5610;  // é»˜è®¤ o36
    }

    // 9. å¯åŠ¨ OStar
    [ostar startWithO16:o16 o36:o36 delegate:self];
}


âœ…-[KGTencentStatistics deviceIDMachineName]
NSString *deviceIDMachineName() {
    //1ã€å…ˆä»keychain è¯»å– kTencentStatic_Qimei
    NSString *keychainQimei = [UICKeyChainStore stringForKey:@"kTencentStatic_Qimei"];

    //2ã€ä»NSUserDefaultsè¯»å–ï¼Œæœ‰å°±ç›´æ¥è¿”å›
    NSString *autoGen = [self getTencentAutoTrackSeverGenUdidBigNumber];
    if (autoGen.length == 0) {
        // autoGen ä¸ºç©ºï¼Œåªèƒ½ä½¿ç”¨ keychain å€¼
        if (keychainQimei == nil) {
            return nil;
        }
        return [keychainQimei copy];
    }

    // autoGen æœ‰å†…å®¹
    if (keychainQimei == nil) {
        // keychain æ²¡æœ‰ â†’ ä½¿ç”¨ autoGen å†™å…¥ keychain
        [UICKeyChainStore setString:autoGen forKey:@"kTencentStatic_Qimei"];
        return autoGen;
    }

    // keychain æœ‰å€¼
    // ç”¨ keychain è¦†ç›– autoGen
    [self setTencentAutoTrackSeverGenUdidBigNumber:keychainQimei];
    return keychainQimei;
}

âœ…-[KGTencentStatistics getTencentAutoTrackSeverGenUdidBigNumber]
// ä»NSUserDefaultsè¯» 
- (id)getTencentAutoTrackSeverGenUdidBigNumber {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    id value = [defaults objectForKeyKGSafe:@"kTencentStatic_Qimei"];
    return value;
}
//å†™å…¥NSUserDefaultsé‡Œ
- (void)setTencentAutoTrackSeverGenUdidBigNumber:(id)value {
    NSUserDefaults *def = [NSUserDefaults standardUserDefaults];
    [def setObjectKGSafe:value forKey:@"kTencentStatic_Qimei"];
    [def synchronize];
}


âœ…
- [KGTencentStatistics setUpTencentStatics]
- (void)setUpTencentStatics {
    if (![KGTencentStatistics isEnable]) {
        return;
    }

    [self setUpOStar];          // é‡ç‚¹ï¼šä¸Šé¢æˆ‘ä»¬å·²ç»åˆ†æè¿‡ OStar çš„æµç¨‹
    [self setUpDengTa];         // å¯èƒ½æ˜¯å¦ä¸€å¥—ç»Ÿè®¡/åŸ‹ç‚¹æˆ–ä¸ŠæŠ¥
    [self getQimei];            // è¯»å–/ç”Ÿæˆ Qimei (é‡è¦ï¼šè®¾å¤‡æŒ‡çº¹)

    // åˆ›å»ºæ¯ 10 ç§’è§¦å‘çš„å®šæ—¶å™¨ï¼Œselector = q36Check:, repeats = YES
    NSTimer *t = [YYTimer timerWithTimeInterval:10.0 target:self selector:@selector(q36Check) repeats:YES];
    [self setQ36Timer:t];
    [t release];

    // æ³¨å†Œç½‘ç»œçŠ¶æ€å˜åŒ–é€šçŸ¥
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(reachabilityChanged:)
                                                 name:_kReachabilityChangedNotification
                                               object:nil];
}

âœ…
-[KGTencentStatistics getQimei]
- (void)getQimei {
    // åŠ é”
    id lockObj = *(id *)((uint8_t *)self + 0x28);
    [lockObj lock];

    self.isFecthingQ36 = YES;

    // 1. æ‹¿ JSON å­—ç¬¦ä¸²
    NSString *json = [self deviceIDMachineName];
    NSDictionary *dict = [NSDictionary dictionaryWithJSONString:json error:nil];

    // 2. å–å‡ºå­—æ®µ
    NSString *o16 = [dict stringForKeyKGSafe:@"o16"];
    NSString *o36 = [dict stringForKeyKGSafe:@"o36"];

    // æ£€æŸ¥ "o32" æ˜¯å¦å­˜åœ¨
    BOOL hasO32 = [[dict allKeys] containsObject:@"o32"];

    // 3. å¦‚æœ o16 æˆ– o36 ä¸ºç©º æˆ–è€… æ²¡æœ‰ o32 â†’ è¯·æ±‚ Ostar æ›´æ–°
    BOOL emptyO16 = [StringTool isEmptyStr:o16];
    BOOL emptyO36 = [StringTool isEmptyStr:o36];

    if (emptyO16 || emptyO36 || !hasO32) {
        __weak typeof(self) weakSelf = self;
        [[OstarService shareInstance] forceUpdateOstar:^{
            __strong typeof(weakSelf) strongSelf = weakSelf;
            if (!strongSelf) return;
            // block å†…éƒ¨é€»è¾‘ï¼ˆçœ‹ä¸‹ä¸€ä¸ªå‡½æ•°ï¼‰
        }];
    } else {
        // 4. å¦‚æœå­—æ®µé½å…¨ â†’ æ›´æ–° o36
        [KGShareAppDataManager updateO36:o36];
        self.isFecthingQ36 = NO;
    }
    // è§£é”
    [lockObj unlock];
}




# mark --------------

0x119f64e1c KGThirdParty!+[UICKeyChainStore setString:forKey:]
0x1084053f4 kugou!-[KGDeviceFPManager setDeviceFingerprintID:]
0x108407ed0 kugou!0x547fed0 (0x10547fed0)
0x190f8b7a8 libdispatch.dylib!_dispatch_call_block_and_release
0x190f8c780 libdispatch.dylib!_dispatch_client_callout
0x190f676fc libdispatch.dylib!_dispatch_lane_serial_drain$VARIANT$armv81
0x190f681b0 libdispatch.dylib!_dispatch_lane_invoke$VARIANT$armv81
0x190f71f14 libdispatch.dylib!_dispatch_workloop_worker_thread
0x1d4f8abd0 libsystem_pthread.dylib!_pthread_wqthread



âœ…æ£€æµ‹è¶Šç‹±
-[CacheDeleteVolume validate]
+[KGCommonTools isPerfectJailBroken]
+[KGDeviceFPManager detectGRootByGRootFileExisted]
+[KGDeviceFPManager detectCurrentDeviceIsGRoot]
+ (BOOL)detectCurrentDeviceIsGRoot{
    // self å­˜åœ¨äº X0 â†’ å­˜åˆ° X19
    id selfObj = self;

    // 1. æ£€æµ‹ GRoot File
    if ([selfObj detectGRootByGRootFileExisted]) {
        return YES;
    }

    // 2. æ£€æµ‹ Cydia è·¯å¾„æ˜¯å¦å­˜åœ¨
    if ([selfObj detectGRootByCydiaPathExisted]) {
        return YES;
    }

    // 3. æ£€æµ‹ stat ç³»ç»Ÿè°ƒç”¨ï¼ˆä¾‹å¦‚ /bin/bash æˆ– /usr/sbin/sshd æ˜¯å¦å¯ statï¼‰
    if ([selfObj detectGRootByStat]) {
        return YES;
    }

    // 4. æ£€æµ‹ AppPath æ˜¯å¦å¼‚å¸¸ï¼ˆæ˜¯å¦è¿è¡Œåœ¨è¶Šç‹±å®¹å™¨ï¼‰
    if ([selfObj detectGRootByAppPathExisted]) {
        return YES;
    }

    // 5. å¦‚æœä¸Šè¿°å…¨éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œæœ€ç»ˆè°ƒç”¨ detectGRootByEnvironmentExisted
    //    å¦‚æœ detectGRootByEnvironmentExisted è¿”å› YES â†’ è®¤ä¸ºè¶Šç‹±
    return [selfObj detectGRootByEnvironmentExisted];
}

âœ…
-[KGDeviceFPManager setDeviceFingerprintID:]
// å¾—åˆ° 1stg4N3Oz1xX2G0LS10bHT9Kï¼ˆ__NSCFStringï¼‰
- (void)setDeviceFingerprintID:(NSString *)deviceFingerprintID {
    // å¯¹åº”æ±‡ç¼–å¼€å§‹ï¼šå…ˆç”¨ __HippyI18nUtils_copy__0 å¯¹ä¼ å…¥å‚æ•°åš copyï¼ˆé˜²æ­¢è¢«å¤–éƒ¨ä¿®æ”¹ï¼‰
    NSString *copied = [HippyI18nUtils copy:deviceFingerprintID];

    // è‹¥ copy ç»“æœä¸º nilï¼Œä½¿ç”¨äºŒè¿›åˆ¶é‡Œçš„é»˜è®¤å¸¸é‡ï¼ˆstru_10F8E5610ï¼‰
    // è¿™é‡Œç”¨ä¸€ä¸ªå ä½é»˜è®¤å€¼æ–¹æ³• defaultDeviceFingerprintID
    NSString *valueToUse = (copied != nil) ? copied : [KGDeviceFPManager defaultDeviceFingerprintID];

    // å†™å…¥ ConfigProtocolï¼ˆé™æ€/å…¨å±€å­˜å‚¨ï¼‰
    [ConfigProtocol setDeviceFingerprintID:valueToUse];

    // åŒæ­¥å†™å…¥é’¥åŒ™ä¸²ï¼ˆkey ä¸æ±‡ç¼–ä¸€è‡´ï¼‰
    [UICKeyChainStore setString:valueToUse forKey:@"DeviceFingerprintID"];

    // ä¸‹åˆ—é€»è¾‘å¯¹åº”æ±‡ç¼–å¯¹å®ä¾‹ ivar çš„åŸå­æ£€æŸ¥ä¸æ›´æ–°ï¼š
    // - å¦‚æœå½“å‰ ivar é nilï¼Œè·³è¿‡ç¬¬ä¸€æ®µå†™å…¥ï¼ˆè§æ±‡ç¼–çš„ CBNZ / isEmptyStr æ£€æŸ¥ï¼‰
    // - å¦åˆ™ï¼Œå½“æ–°å€¼éç©ºä¸”ä¸æ—§å€¼ä¸åŒï¼Œå†™å…¥ self->_deviceFingerprintIDï¼ˆobjc_storeStrong ç­‰ä»·ï¼‰
    //
    // æ±‡ç¼–ä½¿ç”¨ objc_sync_enter/exitï¼Œç­‰ä»·å†™æ³•ç”¨ @synchronized(self)
    @synchronized (self) {
        // å¦‚æœæ–°å€¼ä¸ºç©ºï¼ˆStringTool çš„ isEmptyStrï¼‰ï¼Œä¸è¿›è¡Œæ›¿æ¢
        BOOL isEmpty = [StringTool isEmptyStr:valueToUse];
        if (!isEmpty) {
            NSString *current = self.deviceFingerprintID;
            // å¦‚æœå½“å‰ä¸ºç©ºæˆ–è€…ä¸æ–°å€¼ä¸åŒï¼Œåˆ™æ›´æ–°
            if (current == nil || ![current isEqualToString:valueToUse]) {
                self.deviceFingerprintID = valueToUse; // ç­‰åŒäº objc_storeStrong(location, value)
            }
        }
        // æ— è®ºæ˜¯å¦æ›´æ–°ï¼Œç¦»å¼€åŒæ­¥å—ï¼ˆå¯¹åº” objc_sync_exitï¼‰
    }

    // æ±‡ç¼–åœ¨é€€å‡ºåŒæ­¥å—åä¼šå‘é€ä¸€ä¸ªé€šçŸ¥ï¼škgDeviceFingerprintIDUpdate
    [[NSNotificationCenter defaultCenter] postNotificationName:@"kgDeviceFingerprintIDUpdate" object:nil];
}

âœ…
- [KGDeviceFPManager getDeviceFingerprintID]
- (NSString *)getDeviceFingerprintID {
    NSString *result = nil;
    // local cache object (obj) stored in instance (X20/X21 åœ¨æ±‡ç¼–é‡Œä»£è¡¨ obj/cache)
    objc_sync_enter(self); // j__objc_sync_enter

    NSString *cached = self->_cachedDeviceFingerprint; // ä»å®ä¾‹/é™æ€å­—æ®µè¯»å‡º
    if (cached && ![cached isEqualToString: SOME_SENTINEL_STRING ]) {
        result = [cached copy];
        objc_sync_exit(self);
        [cached release];
        return[result autorelease]; // å®é™…ç”±ç¼–è¯‘å™¨å¤„ç†
    }

    // cached ä¸å¯ç”¨ï¼Œå°è¯•ä» ConfigProtocol è·å–
    NSString *cfgVal = [ConfigProtocol getDeviceFingerprintID];
    if (cfgVal && ![cfgVal isEqualToString: SOME_SENTINEL_STRING ]) {
        // cfgVal æœ‰æ•ˆ
        // å¯èƒ½ç›´æ¥ç”¨ cfgVal
    } else {
        // cfgVal æ— æ•ˆï¼Œå°è¯•ä» Keychain è¯»å–
        NSString *kc = [UICKeyChainStore stringForKey:@"DeviceFingerprintID"];
        if (kc && ![kc isEqualToString: SOME_SENTINEL_STRING ]) {
            cfgVal = kc;
        } else {
            cfgVal = SOME_SENTINEL_STRING; // ä¾‹å¦‚ nil æˆ– @"-"
        }
    }

    // æŠŠè¯»å–åˆ°çš„å€¼å†™å›ç¼“å­˜ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
    self->_cachedDeviceFingerprint = [cfgVal copy];
    objc_sync_exit(self);

    // å¦‚æœæœ€ç»ˆä¸ºç©ºæˆ– isEmpty -> è¿”å› @"-"
    if ([StringTool isEmptyStr:cfgVal]) {
        return @"-";
    } else {
        return [cfgVal copy]; // è¿”å›æ‹·è´
    }
}

âœ…
-[KGDeviceFPManager setDeviceFingerprintID:]
- (void)setDeviceFingerprintID:(NSString *)id{
    NSString *input = [HippyI18nUtils copy:id];

    // é»˜è®¤å­—ç¬¦ä¸²ï¼šstru_10F8E5610 â†’ asc_11331B4F0 å¤„çš„ CFString
    NSString *defaultStr = (NSString *)CFSTRING_AT(stru_10F8E5610);

    // X19 = (input == nil ? defaultStr : input)
    NSString *value = (input == nil ? defaultStr : input);

    // å†™å…¥ ConfigProtocol
    [ConfigProtocol setDeviceFingerprintID:value];

    // å†™å…¥ Keychain:  UICKeyChainStore[@"DeviceFingerprintID"] = value;
    [UICKeyChainStore setString:value forKey:@"DeviceFingerprintID"];

    // ä¸‹é¢å¤„ç†å†…éƒ¨å±æ€§ self->_deviceFingerprintID (ä½äº offset 0x50)
    NSString **slot = (NSString **)((uint8_t *)self + 0x50);

    if (*slot == nil) {                         // åŸæ¥æ˜¯ç©º
        if (![StringTool isEmptyStr:value]) {   // ä¸” value éç©º
            *slot = value;                      // storeStrong
        }
    }

    // å†æ‰§è¡Œä¸€æ¬¡é€»è¾‘åˆ†æ”¯ï¼Œåˆ¤æ–­å€¼æ˜¯å¦å˜åŒ–
    NSString *copyId = [HippyI18nUtils copy:id];
    @synchronized(copyId) {
        if (![StringTool isEmptyStr:value]) {
            NSString *old = *slot;              // load [X21,#8]!
            if (![value isEqualToString:old]) { // ä¸ä¸€æ · â†’ æ›¿æ¢
                *slot = value;                  // storeStrong
            }
        }
    }
    [copyId release];

    // å‘é€šçŸ¥ kgDeviceFingerprintIDUpdate
    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc postNotificationName:@"kgDeviceFingerprintIDUpdate"
                      object:nil];

    [value release];
}

+[ConfigProtocol setDeviceFingerprintID:0x28059b210]
  9207 ms  ğŸ‘‰1stg4N3Oz1xX2G0LS10bHT9Kï¼ˆ__NSCFStringï¼‰
  9210 ms  ğŸ‘ˆ: 1stg4N3Oz1xX2G0LS10bHT9Kï¼ˆ__NSCFStringï¼‰






# mark --------------




  